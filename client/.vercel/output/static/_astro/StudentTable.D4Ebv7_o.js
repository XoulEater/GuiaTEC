import{j as e}from"./jsx-runtime.DSYUAlOe.js";import{r as l}from"./index.DdRMN4IK.js";const g="http://localhost:1234/api";async function D(){return(await fetch(`${g}/students`)).json()}async function E(n){return(await fetch(`${g}/students/${n}`,{method:"DELETE"})).json()}async function P(n){return(await fetch(`${g}/students/${n.carnet}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).json()}const j="http://localhost:1234/api";async function T(n){window.open(`${j}/excel/download/${n}`)}async function A(){window.open(`${j}/excel/download/`)}async function B(n,i){const r=new FormData;r.append("file",n),await fetch(`${j}/excel/upload`,{method:"POST",body:r,headers:{campus:i}})}const O=()=>{const n=localStorage.getItem("user"),i=JSON.parse(n),r=i.campus,[b,x]=l.useState(!1),[u,k]=l.useState(null),[s,c]=l.useState(null),[N,p]=l.useState(!1),[d,f]=l.useState([]),[m,y]=l.useState("carnet"),w=async()=>{const t=await D();f(t)};l.useEffect(()=>{w()},[]);function S(t){k(t),x(!0)}function C(){u&&d.splice(d.indexOf(u),1),x(!1),E(u?.carnet)}function M(t){c(t)}function L(){const t=d.map(a=>a.carnet===s?.carnet?{...a,name:s.name,email:s.email,personalPNumber:s.personalPNumber}:a);f(t),c(null),P(s)}function $(){const t=m=="carnet"?"name":m=="name"?"campus":"carnet";y(t);const a=d.sort((h,o)=>t==="carnet"?h.carnet-o.carnet:t==="name"?h.name.localeCompare(o.name):h.campus.localeCompare(o.campus));f(a)}function v(t){t==="all"?(p(!0),A()):(p(!0),T(r)),p(!1)}function z(){const t=document.createElement("input");t.type="file",t.accept=".xlsx",t.onchange=async()=>{if(t.files&&t.files.length>0){const a=t.files[0];await B(a,r),w()}},t.click()}return e.jsxs("div",{children:[e.jsxs("header",{className:"flex justify-between mx-20 mb-4 ",children:[e.jsxs("button",{className:"flex items-center justify-center w-40 h-12 gap-2 text-white transition duration-300 ease-in-out rounded-md bg-primary-dark hover:bg-primary-light group",onClick:$,children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),e.jsx("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"})]}),m.charAt(0).toUpperCase()+m.slice(1)]}),e.jsxs("aside",{className:"flex gap-3",children:[i.userType==="assistant"&&e.jsxs("button",{id:"upload-excel",onClick:z,className:"flex items-center justify-center w-40 h-12 gap-2 text-white transition duration-300 ease-in-out rounded-md bg-primary-dark hover:bg-primary-light group",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-upload",width:"32",height:"32",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),e.jsx("path",{d:"M12 11v6"}),e.jsx("path",{d:"M9.5 13.5l2.5 -2.5l2.5 2.5"})]}),"Subir"]}),e.jsxs("button",{id:"download-excel",onClick:()=>p(!0),className:"flex items-center justify-center w-40 h-12 gap-2 text-white transition duration-300 ease-in-out rounded-md bg-primary-dark hover:bg-primary-light group",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-download",width:"32",height:"32",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#ffffff",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),e.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),e.jsx("path",{d:"M12 17v-6"}),e.jsx("path",{d:"M9.5 14.5l2.5 2.5l2.5 -2.5"})]}),"Descargar"]})]})]}),e.jsx("div",{className:"grid place-items-center ",children:e.jsxs("section",{className:"w-[90%] h-[500px] overflow-y-scroll no-scrollbar rounded-xl drop-shadow-md shadow-inner border border-black/10 shadow-white/10 ",children:[e.jsxs("header",{className:"grid items-center w-full h-16 grid-cols-6 px-2 bg-zinc-200",children:[e.jsx("span",{className:"text-lg font-semibold ",children:"Sede"}),e.jsx("span",{className:"text-lg font-semibold ",children:"Carne"}),e.jsx("span",{className:"text-lg font-semibold ",children:"Nombre"}),e.jsx("span",{className:"text-lg font-semibold ",children:"Correo"}),e.jsx("span",{className:"text-lg font-semibold ",children:"Teléfono"}),e.jsx("span",{className:"text-lg font-semibold ",children:"Acciones"})]}),d.map((t,a)=>{const h=a%2===0?"bg-white":"bg-zinc-200";return e.jsxs("div",{className:`grid grid-cols-6 h-16 w-full items-center ${h} px-2`,children:[e.jsx("span",{children:t.campus}),e.jsx("span",{children:t.carnet}),s?.carnet===t.carnet?e.jsx("input",{type:"text",className:"pl-0 mr-1 ",value:s.name,onChange:o=>c({...s,name:o.target.value})}):e.jsx("span",{children:t.name}),s?.carnet===t.carnet?e.jsx("input",{type:"text",className:"pl-0 mr-1",value:s.email,onChange:o=>c({...s,email:o.target.value})}):e.jsx("span",{children:t.email}),s?.carnet===t.carnet?e.jsx("input",{type:"text",className:"pl-0 mr-1 ",value:s.personalPNumber,onChange:o=>c({...s,personalPNumber:o.target.value})}):e.jsx("span",{children:t.personalPNumber}),e.jsxs("div",{className:"flex items-center gap-2",children:[s?.carnet===t.carnet?e.jsx("button",{onClick:L,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"transition-all duration-300 ease-out text-primary-light hover:brightness-150 hover:scale-110",width:"32",height:"32",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M5 12l5 5l10 -10"})]})}):e.jsx("button",{onClick:()=>M(t),disabled:r!==t.campus,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${r===t.campus?"text-primary-light hover:brightness-150 hover:scale-110":"text-gray-500"}  transition-all  duration-300 ease-out`,width:"32",height:"32",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}),e.jsx("path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}),e.jsx("path",{d:"M16 5l3 3"})]})}),e.jsx("button",{onClick:()=>S(t),disabled:r!==t.campus,children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:`${r===t.campus?"text-red-600 hover:brightness-150 hover:scale-110":"text-gray-500"}  transition-all  duration-300 ease-out`,width:"32",height:"32",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M4 7l16 0"}),e.jsx("path",{d:"M10 11l0 6"}),e.jsx("path",{d:"M14 11l0 6"}),e.jsx("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),e.jsx("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})})]})]},a)})]})}),b&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-30 flex justify-center items-center z-50",children:e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-lg",children:[e.jsx("h2",{className:"text-xl font-medium ",children:`Está seguro de eliminar a ${u?.name}?`}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx("button",{onClick:C,className:"flex items-center justify-center w-32 h-12 gap-2 text-white transition duration-300 ease-in-out rounded-md bg-primary-dark hover:bg-primary-light group",children:e.jsx("span",{className:"transition-transform duration-300 ease-in-out group-hover:scale-110",children:"Si"})}),e.jsx("button",{onClick:()=>x(!1),className:"flex items-center justify-center w-32 h-12 gap-2 text-white transition duration-300 ease-in-out bg-red-800 rounded-md hover:brightness-125 group",children:e.jsx("span",{className:"transition-transform duration-300 ease-in-out group-hover:scale-110",children:"No"})})]})]})}),N&&e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-30 flex justify-center items-center z-50",children:e.jsxs("div",{className:"flex flex-col gap-5 p-5 bg-white rounded-lg",children:[e.jsx("h2",{className:"text-xl font-medium ",children:"Formato del Archivo"}),e.jsxs("div",{className:"flex gap-5",children:[e.jsx("button",{onClick:()=>v("all"),className:"flex items-center justify-center w-32 h-12 gap-2 text-white transition duration-300 ease-in-out rounded-md bg-primary-dark hover:bg-primary-light group",children:e.jsx("span",{className:"transition-transform duration-300 ease-in-out group-hover:scale-110",children:"Todos"})}),e.jsx("button",{onClick:()=>v("current"),className:"flex items-center justify-center w-32 h-12 gap-2 text-white transition duration-300 ease-in-out rounded-md bg-primary-dark hover:bg-primary-light group",children:e.jsx("span",{className:"transition-transform duration-300 ease-in-out group-hover:scale-110",children:"Sede actual"})})]})]})})]})};export{O as default};
